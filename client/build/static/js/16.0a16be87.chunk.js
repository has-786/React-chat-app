(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[16],{225:function(e,t,a){"use strict";a(49),a(234),a(2)},330:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return k}));var n=a(0),i=a(9),c=a(119),o=a(177),r=a(235),s=a(180),l=a(63),d=a(241),p=a(74),u=a.n(p),m=(a(301),a(302)),b=a.n(m),g=a(70),j=a(49),h=a(172),x=a(229),y=(a(75),a(14)),f=a.n(y),O=a(12),v=(a(225),a(42)),w=(a(123),a(2));v.a.configure();const C=Object(h.a)((e=>({paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",boxShadow:"0px 0px 3px 3px blue",padding:"30px"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},tabLink:{display:"flex",alignItems:"center",justifyContent:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},main:{paddingTop:"30px",marginTop:"45px",height:"100vh",marginLeft:"100px",background:"linear-gradient(to right, #4682B4, #87CEEB)"}})));function k(e){const t=C(),a=Object(i.c)((e=>e.userReducer.name)),p=Object(i.c)((e=>e.userReducer.email)),m=Object(i.c)((e=>e.userReducer.path)),[h,y]=Object(n.useState)(""),[k,I]=Object(n.useState)("none"),A=Object(i.b)(),R=localStorage.getItem("token"),T=f.a.create({baseURL:O.a,headers:{Authorization:"bearer ".concat(R)}}),U=["January","February","March","April","May","June","July","August","September","October","November","December"];return Object(w.jsx)("div",{class:t.main,children:Object(w.jsxs)(x.a,{component:"main",maxWidth:"xs",children:[Object(w.jsx)(r.a,{}),Object(w.jsxs)(g.a,{elevation:3,className:t.paper,children:[Object(w.jsx)(c.a,{className:t.avatar,children:Object(w.jsx)(b.a,{})}),Object(w.jsx)(j.a,{component:"h1",variant:"h5",children:"Add Post"}),Object(w.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(w.jsx)(s.a,{variant:"outlined",margin:"normal",required:!0,multiline:!0,rows:2,fullWidth:!0,type:"text",label:"Add description",value:h,onChange:e=>y(e.target.value),autoFocus:!0}),"Add Photo",Object(w.jsx)("label",{for:"file-input",children:Object(w.jsx)(u.a,{style:{color:"blue",width:"80px",cursor:"pointer"}})}),Object(w.jsx)("input",{id:"file-input",name:"file",type:"file",style:{display:"none"},onChange:e=>{const t=e.target.files[0].type;e.target.files[0].type;t.includes("image")?document.getElementById("previewI").setAttribute("src",window.URL.createObjectURL(e.target.files[0])):(document.getElementById("previewV").style.display="block",document.getElementById("previewV").setAttribute("src",window.URL.createObjectURL(e.target.files[0])))}}),Object(w.jsx)("img",{id:"previewI",width:"100%",height:"100%"}),Object(w.jsxs)("video",{id:"previewV",style:{display:"none"},width:"100%",height:"100%",controls:!0,children:[Object(w.jsx)("source",{type:"video/mp4"}),Object(w.jsx)("source",{type:"video/ogg"})]}),Object(w.jsx)(o.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:async function(t){I("block"),t.preventDefault();const n=new Date,i=n.getUTCDate(),c=n.getUTCMonth(),o=n.getUTCFullYear();let r=n.getHours(),s=n.getMinutes();const l=n.getTime()/1e3;r=0==parseInt(r/10)?"0"+r:r,s=0==parseInt(s/10)?"0"+s:s;const d="".concat(U[c]," ").concat(i,", ").concat(o," ").concat(r,":").concat(s),u=document.getElementById("file-input").files[0];if(!u.type.includes("image")&&!u.type.includes("video"))return v.a.error("Only images and videos are allowed"),!1;let b=new FormData;b.append("uploaderName",a),b.append("uploaderEmail",p),b.append("uploaderDp",m),b.append("desc",h),b.append("path",null===u||void 0===u?void 0:u.name),b.append("time",l),b.append("date",d),b.append("file",u),T.post("uploadpost",b).then((t=>{I("none");const a=t.data;1==a.status?(u&&(u.value=""),y(""),v.a.success(a.msg,{autoClose:1e3}),A({type:"add_post",payload:{...a.post,liked:!1,likeCount:0}}),e.history.replace("/")):v.a.error("Something went wrong",{autoClose:1e3})})).catch((e=>{I("none"),v.a.error("Something went wrong",{autoClose:1e3})}))},className:t.submit,children:"Post"}),Object(w.jsx)(d.a,{container:!0,children:Object(w.jsx)(d.a,{item:!0,xs:!0,children:Object(w.jsx)(l.b,{to:"/",variant:"body2",children:"Back to Home"})})})]})]})]})})}}}]);
//# sourceMappingURL=16.0a16be87.chunk.js.map