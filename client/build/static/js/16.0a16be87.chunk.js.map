{"version":3,"sources":["components/copyright.js","components/uploadpost.js"],"names":["toast","configure","useStyles","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","boxShadow","padding","avatar","margin","backgroundColor","palette","secondary","main","tabLink","justifyContent","form","width","submit","paddingTop","height","marginLeft","background","Uploadpost","props","classes","uploaderName","useSelector","state","userReducer","name","uploaderEmail","email","uploaderDp","path","desc","setDesc","useState","loader","setLoader","dispatch","useDispatch","token","localStorage","getItem","secureAxios","axios","create","baseURL","url","headers","Authorization","concat","days","_jsx","class","children","_jsxs","Container","component","maxWidth","CssBaseline","Paper","elevation","className","Avatar","AddPhotoAlternateIcon","Typography","variant","noValidate","TextField","required","multiline","rows","fullWidth","type","label","value","onChange","evt","target","autoFocus","for","AttachFileIcon","style","color","cursor","id","files","includes","document","getElementById","setAttribute","window","URL","createObjectURL","controls","Button","onClick","async","event","preventDefault","dateObj","Date","day","getUTCDate","month","getUTCMonth","year","getUTCFullYear","h","getHours","m","getMinutes","time","getTime","parseInt","date","file","error","data","FormData","append","post","then","response","body","status","success","msg","autoClose","payload","liked","likeCount","history","replace","catch","err","Grid","container","item","xs","Link","to"],"mappings":"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","file":"static/js/16.0a16be87.chunk.js","sourcesContent":["import Typography from \"@material-ui/core/Typography\";\r\nimport { Link } from \"@material-ui/core\";\r\nconst Copyright = () =>\r\n  <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n    {\"Copyright Â© \"}\r\n    <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n      Sociowe.com\r\n    </Link>{\" \"}\r\n    {new Date().getFullYear()}\r\n    {\".\"}\r\n  </Typography>;\r\n\r\nexport default Copyright;\r\n","import React, { useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\nimport imageCompression from \"browser-image-compression\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport AddPhotoAlternateIcon from \"@material-ui/icons/AddPhotoAlternate\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Header from \"./header\";\r\nimport axios from \"axios\";\r\nimport url from \"../url\";\r\nimport Copyright from \"./copyright\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\ntoast.configure();\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    boxShadow: \"0px 0px 3px 3px blue\",\r\n    padding: \"30px\"\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main\r\n  },\r\n  tabLink: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\"\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1)\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2)\r\n  },\r\n  main: {\r\n    paddingTop: '30px',\r\n    marginTop: '45px',\r\n    height: \"100vh\",\r\n    marginLeft: '100px',\r\n    background: 'linear-gradient(to right, #4682B4, #87CEEB)'\r\n  }\r\n}));\r\n\r\nexport default function Uploadpost(props) {\r\n  const classes = useStyles();\r\n  const uploaderName = useSelector((state) => state.userReducer.name);\r\n  const uploaderEmail = useSelector((state) => state.userReducer.email);\r\n  const uploaderDp = useSelector((state) => state.userReducer.path);\r\n\r\n  const [desc, setDesc] = useState(\"\");\r\n  const [loader, setLoader] = useState(\"none\");\r\n\r\n  const dispatch = useDispatch();\r\n  const token = localStorage.getItem(\"token\");\r\n  const secureAxios = axios.create({\r\n    baseURL: url,\r\n    headers: {\r\n      Authorization: `bearer ${token}`\r\n    }\r\n  });\r\n  const days = [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\"\r\n  ];\r\n\r\n  async function upload(event) {\r\n    setLoader(\"block\");\r\n\r\n    event.preventDefault();\r\n\r\n    const dateObj = new Date();\r\n    const day = dateObj.getUTCDate();\r\n    const month = dateObj.getUTCMonth(); //months from 1-12\r\n    const year = dateObj.getUTCFullYear();\r\n\r\n    let h = dateObj.getHours();\r\n    let m = dateObj.getMinutes();\r\n\r\n    const time = dateObj.getTime() / 1000;\r\n\r\n    h = parseInt(h / 10) == 0 ? \"0\" + h : h;\r\n    m = parseInt(m / 10) == 0 ? \"0\" + m : m;\r\n\r\n    const date = `${days[month]} ${day}, ${year} ${h}:${m}`;\r\n    const file = document.getElementById(\"file-input\").files[0];\r\n    if (file.type.includes(\"image\") || file.type.includes(\"video\")) {\r\n    } else {\r\n      toast.error(\"Only images and videos are allowed\");\r\n      return false;\r\n    }\r\n\r\n    let data = new FormData();\r\n    data.append(\"uploaderName\", uploaderName);\r\n    data.append(\"uploaderEmail\", uploaderEmail);\r\n    data.append(\"uploaderDp\", uploaderDp);\r\n    data.append(\"desc\", desc);\r\n    data.append(\"path\", file?.name);\r\n    data.append(\"time\", time);\r\n    data.append(\"date\", date);\r\n    data.append(\"file\", file);\r\n\r\n    secureAxios\r\n      .post(\"uploadpost\", data)\r\n      .then((response) => {\r\n        setLoader(\"none\");\r\n        const body = response.data;\r\n\r\n        if (body.status == 1) {\r\n          if (file) file.value = \"\";\r\n          setDesc(\"\");\r\n          toast.success(body.msg, { autoClose: 1000 });\r\n          dispatch({\r\n            type: \"add_post\",\r\n            payload: { ...body.post, liked: false, likeCount: 0 }\r\n          });\r\n          props.history.replace(\"/\");\r\n        } else toast.error(\"Something went wrong\", { autoClose: 1000 });\r\n      })\r\n      .catch((err) => {\r\n        setLoader(\"none\");\r\n        toast.error(\"Something went wrong\", { autoClose: 1000 });\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div class={classes.main}>\r\n      <Container component=\"main\" maxWidth=\"xs\">\r\n        <CssBaseline />\r\n        <Paper elevation={3} className={classes.paper}>\r\n          <Avatar className={classes.avatar}>\r\n            <AddPhotoAlternateIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Add Post\r\n          </Typography>\r\n          <form className={classes.form} noValidate>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              multiline\r\n              rows={2}\r\n              fullWidth\r\n              type=\"text\"\r\n              label=\"Add description\"\r\n              value={desc}\r\n              onChange={(evt) => setDesc(evt.target.value)}\r\n              autoFocus\r\n            />\r\n            Add Photo\r\n            <label for=\"file-input\">\r\n              <AttachFileIcon\r\n                style={{ color: \"blue\", width: \"80px\", cursor: \"pointer\" }}\r\n              />\r\n            </label>\r\n            <input\r\n              id=\"file-input\"\r\n              name=\"file\"\r\n              type=\"file\"\r\n              style={{ display: \"none\" }}\r\n              onChange={(evt) => {\r\n                const type = evt.target.files[0].type;\r\n                const name = evt.target.files[0].type;\r\n                if (type.includes(\"image\"))\r\n                  document\r\n                    .getElementById(\"previewI\")\r\n                    .setAttribute(\r\n                      \"src\",\r\n                      window.URL.createObjectURL(evt.target.files[0])\r\n                    );\r\n                else {\r\n                  document.getElementById(\"previewV\").style.display = \"block\";\r\n                  document\r\n                    .getElementById(\"previewV\")\r\n                    .setAttribute(\r\n                      \"src\",\r\n                      window.URL.createObjectURL(evt.target.files[0])\r\n                    );\r\n                }\r\n              }}\r\n            />\r\n            <img id=\"previewI\" width=\"100%\" height=\"100%\" />\r\n            <video\r\n              id=\"previewV\"\r\n              style={{ display: \"none\" }}\r\n              width=\"100%\"\r\n              height=\"100%\"\r\n              controls\r\n            >\r\n              <source type=\"video/mp4\" />\r\n              <source type=\"video/ogg\" />\r\n            </video>\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={upload}\r\n              className={classes.submit}\r\n            >\r\n              Post\r\n            </Button>\r\n            <Grid container>\r\n              <Grid item xs>\r\n                <Link to=\"/\" variant=\"body2\">\r\n                  Back to Home\r\n                </Link>\r\n              </Grid>\r\n            </Grid>\r\n          </form>\r\n        </Paper>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}