(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[17],{231:function(e,t,a){"use strict";a(0);var o=a(172),n=a(2);const c=Object(o.a)((e=>({empty:{padding:"10px 10px 40px 10px",marginLeft:"30%",marginRight:"30%",color:"#848884"}})));t.a=()=>{const e=c();return Object(n.jsx)("div",{className:e.empty,children:"Nothing here yet!"})}},324:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return V}));var o=a(0),n=a.n(o),c=a(9),s=a(63),r=a(172),i=(a(4),a(326)),l=a(327),d=a(328),p=a(329),j=a(119),h=a(71),m=a(49),u=a(300),x=a.n(u),b=a(298),g=a.n(b),O=a(299),y=a.n(O),C=a(78),f=a.n(C),w=a(290),S=a(107),k=a(108),v=a(109),_=a(264),E=a(178),N=a(110),R=a(263),T=a(289),L=a(176),B=a(104),z=a(325),I=a(229),D=a(235),F=a(177),J=a(249),A=a.n(J),P=a(240),W=a.n(P),U=a(180),Y=a(231),H=(a(75),a(12)),M=a(14),q=a.n(M),G=a(42),K=(a(123),a(2));G.a.configure();const Q=Object(r.a)((e=>({root:{maxWidth:500,margin:"10px auto 25px auto",padding:"10px"},media:{paddingTop:"100%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:"lightgrey"},main:{border:"1px solid black",paddingTop:"30px",marginTop:"45px",marginLeft:"100px",minHeight:"100vh",background:"linear-gradient(to right, #4682B4, #87CEEB)"},empty:{position:"fixed",left:"25%",width:"100%",top:"50vh",zIndex:"1"}})));function V(e){const t=Q(),[a,r]=n.a.useState(!1),[u,b]=n.a.useState(null),[O,C]=n.a.useState(null),[J,P]=n.a.useState(0),[M,V]=n.a.useState(0),[X,Z]=n.a.useState(0),[$,ee]=n.a.useState(""),[te,ae]=n.a.useState(""),[oe,ne]=n.a.useState({}),[ce,se]=n.a.useState(null),[re,ie]=n.a.useState(!1),le=Object(c.c)((e=>e.userReducer.email)),de=Object(c.c)((e=>e.userReducer.path)),pe=Object(c.c)((e=>e.userReducer.name)),je=()=>{ie(!1)},he=()=>{b(null)},me=()=>{C(null)},ue=localStorage.getItem("token"),xe=Object(c.b)(),be=Object(c.c)((e=>e.postReducer.exist)),ge=Object(c.c)((e=>e.postReducer.post)),Oe=e=>{if(oe[e]){let t=JSON.parse(JSON.stringify(oe));t[e]=!1,ne(t)}else{let t=JSON.parse(JSON.stringify(oe));t[e]=!0,ne(t)}},ye=q.a.create({baseURL:H.a,headers:{Authorization:"bearer ".concat(ue)}});Object(o.useEffect)((()=>{console.log(ge),be||ye.get("getPost").then((t=>{const a=t.data;1==a.status?(xe({type:"load_post",payload:a.post}),e.history.replace("/")):G.a.error("Something went wrong",{autoClose:1e3})})).catch((e=>G.a.error("Something went wrong",{autoClose:1e3})))}),[]);const Ce=(e,t,a)=>{let o="";if("comment"===e?(o=document.getElementById(t).value,document.getElementById(t).value=""):(o=document.getElementById(t+a).value,document.getElementById(t+a).value=""),""===o)return;const n={name:pe,email:le,path:de,content:o,reply:[]};ye.post("addComment",{_id:t,type:e,comment:n,index:a}).then((o=>{1==o.data.status?(xe({type:"add_".concat(e),payload:{_id:t,comment:n,index:a}}),G.a.success("Your ".concat(e," was added"),{autoClose:1e3})):G.a.error("Something went wrong",{autoClose:2e3})})).catch((e=>G.a.error("Something went wrong "+e,{autoClose:2e3})))},fe=()=>{ye.post("deleteComment",{type:$,_id:te,index1:X,index:M}).then((e=>{1==e.data.status?(xe({type:"delete_".concat($),payload:{_id:te,index1:X,index:M}}),G.a.success("Your ".concat($," was deleted"),{autoClose:1e3})):G.a.error("Something went wrong",{autoClose:2e3})})).catch((e=>G.a.error("Something went wrong "+e,{autoClose:2e3}))),me()};function we(e){let{comment:t}=e;const[a,n]=Object(o.useState)(t);return Object(K.jsxs)(N.a,{open:re,onClose:je,"aria-labelledby":"form-dialog-title",children:[Object(K.jsx)(L.a,{id:"form-dialog-title",children:"Edit comment"}),Object(K.jsx)(T.a,{children:Object(K.jsx)(U.a,{autoFocus:!0,margin:"dense",id:"name",label:"Write comment",value:a,onChange:e=>n(e.target.value),type:"text",fullWidth:!0})}),Object(K.jsxs)(R.a,{children:[Object(K.jsx)(F.a,{onClick:()=>{me(),je(),n("")},color:"primary",children:"Cancel"}),Object(K.jsx)(F.a,{onClick:()=>{((e,t,a,o,n)=>{const c={name:pe,email:le,path:de,content:n,reply:[]};ye.post("editComment",{type:e,_id:t,index1:a,index:o,commentData:c}).then((n=>{1==n.data.status?(xe({type:"edit_".concat(e),payload:{_id:t,index1:a,index:o,commentData:c}}),G.a.success("Your ".concat(e," was edited"),{autoClose:1e3})):G.a.error("Something went wrong",{autoClose:2e3})})).catch((e=>G.a.error("Something went wrong "+e,{autoClose:2e3})))})($,te,X,M,a),me(),je(),n("")},color:"primary",children:"Confirm"})]})]})}const Se=(e,t,a,o,n)=>Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(S.a,{children:null===a||void 0===a?void 0:a.map(((a,c)=>Object(K.jsxs)(k.a,{children:[Object(K.jsx)(E.a,{children:Object(K.jsx)(j.a,{src:H.a+"/uploads/".concat(a.path,"/").concat(ue),children:Object(K.jsx)(W.a,{color:"lightgrey"})})}),Object(K.jsx)(v.a,{secondary:a.content,primary:a.name}),Object(K.jsxs)(_.a,{children:["comment"===o?Object(K.jsx)(F.a,{color:"primary","data-toggle":"collapse","data-target":"#reply"+t+c,children:"Reply"}):null,Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(h.a,{"aria-label":"settings",children:Object(K.jsx)(g.a,{onClick:e=>((e,t,a,o,n,c)=>{V(n),Z(o),ae(a),ee(t),se(c),C(e.currentTarget)})(e,o,t,c,n,a.content)})}),Object(K.jsxs)(B.a,{id:"simple-menu-comment",anchorEl:O,keepMounted:!0,open:Boolean(O),onClose:me,children:[le===a.email?Object(K.jsx)(z.a,{onClick:()=>{ie(!0)},children:"Edit"}):null,le===a.email&&le===e?Object(K.jsx)(z.a,{onClick:fe.bind(this),children:"Delete"}):null]})]})]}),Object(K.jsx)("br",{}),Object(K.jsx)("br",{}),"comment"===o?Object(K.jsx)(_.a,{id:"reply"+t+c,class:"collapse",style:{paddingLeft:"50px"},children:Se(e,t,a.reply,"reply",c)}):null]})))}),Object(K.jsxs)(K.Fragment,{children:["reply"===o?Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(U.a,{label:"Add a reply",id:t+n,style:{marginLeft:"5px",width:"92%"}}),Object(K.jsx)(A.a,{color:"secondary",style:{float:"right",marginTop:"15px"},onClick:()=>Ce("reply",t,n)})]}):null,Object(K.jsx)("br",{})]})]}),ke=e=>{const t=ge[e]._id;xe({type:"hide_post",payload:t}),he()},ve=(e,t)=>{const a=ge[t]._id;q.a.create({baseURL:H.a,headers:{Authorization:"bearer ".concat(ue)}}).post("deletePost",{email:e,_id:a}).then((e=>{1==e.data.status?(xe({type:"hide_post",payload:a}),G.a.success("Post was deleted",{autoClose:1500})):G.a.error("Something went wrong",{autoClose:1e3})})).catch((e=>G.a.error("Something went wrong",{autoClose:1e3}))),he()},_e=(e,t,a)=>{xe({type:"like_post",payload:{_id:t,liked:a}});q.a.create({baseURL:H.a,headers:{Authorization:"bearer ".concat(ue)}}).post("likePost",{email:e,_id:t,liked:a}).then((e=>{1==e.data.status||G.a.error("Something went wrong",{autoClose:1e3})})).catch((e=>G.a.error("Something went wrong",{autoClose:1e3})))};return console.log("posts",ge),Object(K.jsxs)("div",{class:t.main,children:[Object(K.jsx)(w.a,{color:"primary",style:{position:"fixed",right:10,top:"92vh",height:"45px",width:"45px",zIndex:"1",float:"right"},"aria-label":"New Room",onClick:()=>e.history.push("/uploadpost"),children:Object(K.jsx)(f.a,{})}),Object(K.jsxs)(I.a,{component:"main",maxWidth:"xl",children:[Object(K.jsx)(D.a,{}),null!==ge&&void 0!==ge&&ge.length?ge.map(((a,o)=>Object(K.jsxs)(i.a,{className:t.root,children:[Object(K.jsx)(l.a,{avatar:Object(K.jsx)(j.a,{"aria-label":"recipe",className:t.avatar,src:"".concat(H.a,"/uploads/").concat(a.uploaderDp,"/").concat(ue),onClick:()=>e.history.push("/profile/".concat(a.uploaderEmail,"-").concat(a.uploaderName))}),action:Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(h.a,{"aria-label":"settings",children:Object(K.jsx)(g.a,{onClick:e=>((e,t)=>{P(t),b(e.currentTarget)})(e,o)})}),Object(K.jsxs)(B.a,{id:"simple-menu",anchorEl:u,keepMounted:!0,open:Boolean(u),onClose:he,children:[Object(K.jsx)(z.a,{onClick:ke.bind(this,J),children:"Hide"}),le===ge[J].uploaderEmail?Object(K.jsx)(z.a,{onClick:ve.bind(this,le,J),children:"Delete"}):null]})]}),title:a.uploaderName,subheader:a.date}),Object(K.jsx)(d.a,{children:Object(K.jsxs)(m.a,{paragraph:!0,children:[a.desc.split(" ").length<=30||oe[o]?a.desc:a.desc.split(" ").slice(0,30).join(" "),"\xa0\xa0",a.desc.split(" ").length>30?Object(K.jsx)(s.b,{style:{textDecoration:"none",fontSize:"15px"},onClick:Oe.bind(this,o),children:oe[o]?"read less":"read more"}):null]})}),"undefined"!=a.path&&(a.path.includes(".jpg")||a.path.includes(".png")||a.path.includes(".jpeg"))?Object(K.jsx)("img",{src:"".concat(H.a,"/uploads/").concat(a.path,"/").concat(ue),width:"100%",height:"100%"}):"undefined"!=a.path&&(a.path.includes(".mp4")||a.path.includes(".wav")||a.path.includes(".ogg"))?Object(K.jsxs)("video",{width:"100%",height:"100%",controls:!0,children:[Object(K.jsx)("source",{src:H.a+"/uploads/".concat(a.path,"/").concat(ue),type:"video/mp4"}),Object(K.jsx)("source",{src:H.a+"/uploads/".concat(a.path,"/").concat(ue),type:"video/wav"}),Object(K.jsx)("source",{src:H.a+"/uploads/".concat(a.path,"/").concat(ue),type:"video/ogg"})]}):null,Object(K.jsxs)(p.a,{disableSpacing:!0,children:[Object(K.jsx)(h.a,{"aria-label":"add to favorites",children:Object(K.jsx)(y.a,{onClick:_e.bind(this,le,a._id,a.liked),color:a.liked?"Primary":""})})," ",a.likeCount,Object(K.jsx)(h.a,{"aria-label":"share",children:Object(K.jsx)(x.a,{})})]}),Object(K.jsx)(d.a,{children:Object(K.jsx)(F.a,{color:"secondary","data-toggle":"collapse","data-target":"#reply"+a._id,style:{textTransform:"none",float:"right",marginTop:"-67px",fontSize:"17px"},children:"Comments"})}),Object(K.jsx)(d.a,{id:"reply"+a._id,class:"collapse",style:{marginTop:"-30px"},children:Se(a.uploaderEmail,a._id,a.comment,"comment")}),Object(K.jsx)(U.a,{label:"Add a comment",id:a._id,style:{width:"92%",marginLeft:"5px",marginTop:"-20px"}}),Object(K.jsx)(A.a,{color:"secondary",style:{float:"right",marginTop:"0px"},onClick:()=>Ce("comment",a._id)})]}))):Object(K.jsx)("div",{className:t.empty,children:Object(K.jsx)(Y.a,{})})]}),Object(K.jsx)(we,{comment:ce})]})}}}]);
//# sourceMappingURL=17.19a25a25.chunk.js.map